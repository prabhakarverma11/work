<!DOCTYPE html>
<html>
<head>
    <title>Swachh Public Toilets: Ratings and Reviews</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <style>
        /* Always set the map height explicitly to define the size of the div
         * element that contains the map. */
        #map {
            /*margin: 10px 20px;*/
            height: 100%;
        }

        /* Optional: Makes the sample page fill the window. */
        html, body {
            height: 100%;
            margin: 10px;
            padding: 10px;
        }
    </style>
    <script>
        // This example requires the Places library. Include the libraries=places
        // parameter when you first load the API. For example:
        // <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places">
        var map;
        var infowindow;
        var delhiLat = 28.612308;
        var delhiLng = 77.231054;
        var data = [];
        function initMap() {

            map = new google.maps.Map(document.getElementById('map'), {
                center: {lat: delhiLat, lng: delhiLng},
                zoom: 10
            });

            infowindow = new google.maps.InfoWindow();

            $.ajax({
                type: "GET",
                url: "data.txt",
                dataType: "text",
                success: function (data) {
                    processData(data);
                }
            });
        }
        function processData(data) {
            var dataArr = data.split("\n");

            dataArr.forEach(function (item) {
                var lat = item.split(",")[0];
                var lng = item.split(",")[1];

                var marker = new google.maps.Marker({
                    map: map,
                    position: {lat: parseFloat(lat), lng: parseFloat(lng)},
                    title: "My Map",
                    draggable: true,
                    animation: google.maps.Animation.DROP
                });
                google.maps.event.addListener(marker, 'click', function () {
                    infowindow.setContent('<p>Marker Location:' + marker.getPosition() + '</p>');
                    infowindow.open(map, this);
                    var request = {
                        location: marker.getPosition(),
                        query: marker.get,
                        radius: 50
                    };

                    var service = new google.maps.places.PlacesService(map);
                    service.nearbySearch(request, callback);

                });
            });
        }

    </script>

    <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>

    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDE6hMNFUb_MgX1aVvtnpAu52mS_9pZ_Zs&libraries=places&callback=initMap"
            async defer></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>
<body class="container" style="background-color: rgba(241,240,239,0.51)">
<div class="row" style="height: 10%;font-size: x-large;text-align: center">Swachh Public Toilets: Ratings and Reviews</div>
<div class="row" style="height: 85%">
    <div class="col-md-6" style="height: 100%">
        <div id="map" style="border: 1px solid black"></div>
    </div>
    <div class="col-md-offset-1 col-md-5">
        <div class="row"><strong>Rating:</strong> 4.4</div>
        <div class="row" style="">
            <strong>Reviews:</strong>
            <div style="max-height: 480px;height: 100%;overflow: scroll">
                <ul class="list-group">
                    <li class="list-group-item" style="border: 1px solid grey">
                        <div><strong>Rating:</strong> 1.1</div>
                        <div>It needs improvement but I am happy that it is located on Google</div>
                    </li>
                    <li class="list-group-item" style="border: 1px solid grey">
                        <div><strong>Rating:</strong> 1.1</div>
                        <div>It needs improvement but I am happy that it is located on Google</div>
                    </li>
                    <li class="list-group-item" style="border: 1px solid grey">
                        <div><strong>Rating:</strong> 1.1</div>
                        <div>It needs improvement but I am happy that it is located on Google</div>
                    </li>
                    <li class="list-group-item" style="border: 1px solid grey">
                        <div><strong>Rating:</strong> 1.1</div>
                        <div>It needs improvement but I am happy that it is located on Google</div>
                    </li>
                    <li class="list-group-item" style="border: 1px solid grey">
                        <div><strong>Rating:</strong> 1.1</div>
                        <div>It needs improvement but I am happy that it is located on Google</div>
                    </li>
                    <li class="list-group-item" style="border: 1px solid grey">
                        <div><strong>Rating:</strong> 1.1</div>
                        <div>It needs improvement but I am happy that it is located on Google</div>
                    </li>
                    <li class="list-group-item" style="border: 1px solid grey">
                        <div><strong>Rating:</strong> 1.1</div>
                        <div>It needs improvement but I am happy that it is located on Google</div>
                    </li>
                    <li class="list-group-item" style="border: 1px solid grey">
                        <div><strong>Rating:</strong> 1.1</div>
                        <div>It needs improvement but I am happy that it is located on Google</div>
                    </li>
                    <li class="list-group-item" style="border: 1px solid grey">
                        <div><strong>Rating:</strong> 1.1</div>
                        <div>It needs improvement but I am happy that it is located on Google</div>
                    </li>
                    <li class="list-group-item" style="border: 1px solid grey">
                        <div><strong>Rating:</strong> 1.1</div>
                        <div>It needs improvement but I am happy that it is located on Google</div>
                    </li>
                    <li class="list-group-item" style="border: 1px solid grey">
                        <div><strong>Rating:</strong> 1.1</div>
                        <div>It needs improvement but I am happy that it is located on Google</div>
                    </li>
                    <li class="list-group-item" style="border: 1px solid grey">
                        <div><strong>Rating:</strong> 1.1</div>
                        <div>It needs improvement but I am happy that it is located on Google</div>
                    </li>
                    <li class="list-group-item" style="border: 1px solid grey">
                        <div><strong>Rating:</strong> 1.1</div>
                        <div>It needs improvement but I am happy that it is located on Google</div>
                    </li>
                    <li class="list-group-item" style="border: 1px solid grey">
                        <div><strong>Rating:</strong> 1.1</div>
                        <div>It needs improvement but I am happy that it is located on Google</div>
                    </li>


                </ul>
            </div>
        </div>
    </div>
</div>

</body>

</html>